{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { map } from 'rxjs';\nlet AppComponent = class AppComponent {\n  constructor(festivosService) {\n    this.festivosService = festivosService;\n    this.festivo = {\n      id: 0,\n      nombre: '',\n      dia: 0,\n      mes: 0,\n      diasPascuas: 0,\n      idTipo: 0,\n      tipo: {\n        id: 0,\n        nombre: ''\n      }\n    };\n    this.todosFestivos$ = this.festivosService.listaFestivos$;\n    this.festivosFiltrados = [];\n    this.idConsulta = 0;\n    this.tipoBusqueda = 0;\n    this.nombreBusqueda = '';\n    this.idModificar = 0;\n    this.idEliminar = 0;\n    this.lenght$ = this.todosFestivos$.pipe(map(festivos => festivos.length));\n    this.fechaValidar = ''; // Inicializa con la fecha actual\n    this.resultadoValidacion = null;\n  }\n  ngOnInit() {\n    this.festivosService.listarTodos().subscribe();\n  }\n  agregar() {\n    this.festivosService.agregarFestivo(this.festivo).subscribe(() => {\n      alert('Festivo agregado');\n    });\n  }\n  consultar() {\n    this.festivosService.obtenerFestivo(this.idConsulta).subscribe(data => {\n      this.festivoConsultado = data;\n    });\n  }\n  listarTodos() {\n    this.festivosService.listarTodos().subscribe(data => {\n      this.todosFestivos$ = data;\n    });\n  }\n  buscarPorTipoYNombre() {\n    this.festivosService.buscarPorTipoYNombre(this.tipoBusqueda, this.nombreBusqueda).subscribe(data => {\n      this.festivosFiltrados = data;\n    });\n  }\n  actualizarFestivo() {\n    this.festivo.id = this.idModificar;\n    this.festivosService.actualizarFestivo(this.idModificar, this.festivo).subscribe(() => {\n      alert('Festivo actualizado');\n    });\n  }\n  eliminarFestivo() {\n    this.festivosService.eliminarFestivo(this.idEliminar).subscribe(() => {\n      alert('Festivo eliminado');\n    });\n  }\n  validarFecha() {\n    console.log(\"empieza la validacion de la fecha\", this.fechaValidar);\n    if (!this.fechaValidar) {\n      this.resultadoValidacion = null;\n      return;\n    }\n    const [anio, mes, dia] = this.fechaValidar.split('-').map(Number);\n    this.checkIfFestivoExists(dia, mes, anio).subscribe(existe => {\n      this.resultadoValidacion = existe;\n    });\n  }\n  checkIfFestivoExists(dia, mes, anio) {\n    return this.todosFestivos$.pipe(map(festivos => festivos.some(festivo => festivo.dia === dia && festivo.mes === mes && festivo.anio === anio)));\n  }\n};\nAppComponent = __decorate([Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})], AppComponent);\nexport { AppComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}